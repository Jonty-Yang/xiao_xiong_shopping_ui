{"ast":null,"code":"import HomeNavBar from \"@/components/home/HomeNavBar\";\nimport Search from \"@/components/home/Search\";\nexport default {\n  name: \"GoodsDetail\",\n  components: {\n    Search,\n    HomeNavBar\n  },\n  data() {\n    return {\n      goodsDetail: {},\n      num: 1,\n      isUseSub: true,\n      isUseAdd: false,\n      order: {\n        gid: 1,\n        goods_name: '',\n        uid: 1,\n        price: 0,\n        total: 0,\n        number: 1,\n        status: 0\n      }\n    };\n  },\n  created() {\n    this.goodsDetail = this.$store.state.goodsDetail;\n  },\n  methods: {\n    addNum() {\n      if (this.num < this.goodsDetail.stock) {\n        this.num++;\n        this.isUseSub = false;\n      } else {\n        this.num = this.goodsDetail.stock;\n        this.isUseAdd = true;\n        this.isUseSub = false;\n      }\n    },\n    subNum() {\n      if (this.num > 1) {\n        this.num--;\n        this.isUseAdd = false;\n      } else {\n        this.num = 1;\n        this.isUseSub = true;\n      }\n    },\n    // 点击下单\n    buy() {\n      this.$confirm('确定下单该商品吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.order.uid = this.$store.state.userLogin.uid;\n        this.order.gid = this.goodsDetail.gid;\n        this.order.goods_name = this.goodsDetail.name;\n        this.order.price = this.goodsDetail.dis_price;\n        this.order.number = this.num;\n        this.order.total = this.goodsDetail.dis_price * this.num;\n        this.$axios.post('/orders/buy', this.order).then(resp => {\n          if (resp.data.code == 200) {\n            this.$message.success(resp.data.data);\n          } else {\n            this.$message.error(resp.data.data);\n          }\n          console.log(\"resp;\", resp.data);\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消'\n        });\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AA6DA;AACA;AAEA;EACAA;EACAC;IAAAC;IAAAC;EAAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;QACA;QACA;MACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACAC;QACAC;QACAC;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,4CACAC;UACA;YACA;UACA;YACA;UACA;UACAC;QACA;MACA;QACA;UACAF;UACAG;QACA;MACA;IAEA;EACA;AACA","names":["name","components","Search","HomeNavBar","data","goodsDetail","num","isUseSub","isUseAdd","order","gid","goods_name","uid","price","total","number","status","created","methods","addNum","subNum","buy","confirmButtonText","cancelButtonText","type","then","console","message"],"sourceRoot":"src/components/goods","sources":["GoodsDetail.vue"],"sourcesContent":["<template>\r\n\r\n    <div class=\"box\">\r\n        <el-container class=\"el-container\">\r\n            <el-header>\r\n\r\n\r\n            </el-header>\r\n            <el-main class=\"el-main\">\r\n                <div class=\"left\">\r\n                    <img :src=\"goodsDetail.img\" alt=\"\">\r\n                </div>\r\n                <div class=\"right\">\r\n                    <div class=\"goods-title\">\r\n                        <h3>{{goodsDetail.name}}</h3>\r\n                        <span>月销{{goodsDetail.sales}}+</span>\r\n                    </div>\r\n                    <div class=\"price\">\r\n                        <span>原价：<del>￥{{goodsDetail.or_price}}</del></span>\r\n                        <p>促销价：￥{{goodsDetail.dis_price}}</p>\r\n                    </div>\r\n                    <div class=\"color\">\r\n                        <span>颜色：{{goodsDetail.color}}</span>\r\n                    </div>\r\n                    <div class=\"detail\">\r\n                        <span>商品描述：{{goodsDetail.remark}}</span>\r\n                    </div>\r\n                    <div class=\"number\">\r\n                        <span>数量：</span>\r\n                        <el-button type=\"primary\"\r\n                                   class=\"sub-num\"\r\n                                   @click=\"subNum\"\r\n                                   :disabled=\"isUseSub\"\r\n                                   size=\"mini\">-\r\n                        </el-button>\r\n                        <input\r\n                                class=\"num\"\r\n                                v-model.number=\"num\"\r\n                        />\r\n                        <el-button type=\"primary\"\r\n                                   class=\"add-num\"\r\n                                   @click=\"addNum\"\r\n                                   :disabled=\"isUseAdd\"\r\n                                   size=\"mini\">+\r\n                        </el-button>\r\n\r\n                    </div>\r\n                    <div>\r\n                        <el-button type=\"primary\" @click=\"buy\">立即下单</el-button>\r\n                        <el-button type=\"primary\">加入购物车</el-button>\r\n                    </div>\r\n                </div>\r\n            </el-main>\r\n            <el-footer>\r\n                宝贝评论\r\n            </el-footer>\r\n        </el-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import HomeNavBar from \"@/components/home/HomeNavBar\";\r\n    import Search from \"@/components/home/Search\";\r\n\r\n    export default {\r\n        name: \"GoodsDetail\",\r\n        components: {Search, HomeNavBar},\r\n        data() {\r\n            return {\r\n                goodsDetail: {},\r\n                num: 1,\r\n                isUseSub: true,\r\n                isUseAdd: false,\r\n                order: {\r\n                    gid: 1,\r\n                    goods_name:'',\r\n                    uid: 1,\r\n                    price: 0,\r\n                    total: 0,\r\n                    number: 1,\r\n                    status: 0\r\n                }\r\n            }\r\n        },\r\n        created() {\r\n            this.goodsDetail = this.$store.state.goodsDetail\r\n        },\r\n        methods: {\r\n            addNum() {\r\n                if(this.num < this.goodsDetail.stock){\r\n                    this.num++\r\n                    this.isUseSub = false\r\n                } else {\r\n                    this.num = this.goodsDetail.stock\r\n                    this.isUseAdd = true\r\n                    this.isUseSub = false\r\n                }\r\n            },\r\n            subNum() {\r\n                if (this.num > 1) {\r\n                    this.num--\r\n                    this.isUseAdd = false\r\n                } else {\r\n                    this.num = 1\r\n                    this.isUseSub = true\r\n                }\r\n            },\r\n            // 点击下单\r\n            buy() {\r\n                this.$confirm('确定下单该商品吗？','提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type:'warning'\r\n                }).then(() => {\r\n                    this.order.uid = this.$store.state.userLogin.uid\r\n                    this.order.gid = this.goodsDetail.gid\r\n                    this.order.goods_name = this.goodsDetail.name\r\n                    this.order.price = this.goodsDetail.dis_price\r\n                    this.order.number = this.num\r\n                    this.order.total = this.goodsDetail.dis_price * this.num\r\n                    this.$axios.post('/orders/buy',this.order)\r\n                        .then( resp => {\r\n                            if(resp.data.code == 200 ){\r\n                                this.$message.success(resp.data.data)\r\n                            } else {\r\n                                this.$message.error(resp.data.data)\r\n                            }\r\n                            console.log(\"resp;\",resp.data)\r\n                        })\r\n                }).catch(() => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '已取消'\r\n                    })\r\n                })\r\n\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n    .box {\r\n        width: 100%;\r\n        height: 100%;\r\n        /*background-color: #E8E2E0;*/\r\n    }\r\n\r\n    .el-container {\r\n        margin: 0 auto;\r\n        width: 800px;\r\n    }\r\n\r\n    .left > img {\r\n        width: 300px;\r\n    }\r\n\r\n    .left, .right {\r\n        float: left;\r\n        margin-right: 20px;\r\n    }\r\n\r\n    .right > div {\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    .number {\r\n        display: flex;\r\n        justify-content: left;\r\n    }\r\n    .number > span,.sub-num{\r\n        display: inline-block;\r\n        border: 1px solid black;\r\n        /*vertical-align: center;*/\r\n        line-height: 25px;\r\n    }\r\n    .num {\r\n        margin: 0 !important;\r\n        width: 60px !important;\r\n        text-align: center;\r\n    }\r\n\r\n    .add-num, .sub-num {\r\n        font-size: 20px;\r\n        border-radius: 0;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}