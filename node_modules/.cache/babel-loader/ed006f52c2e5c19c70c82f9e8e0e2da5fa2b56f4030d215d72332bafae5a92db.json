{"ast":null,"code":"export default {\n  name: \"CollectionGoods\",\n  data() {\n    return {\n      collectionGoods: []\n    };\n  },\n  created() {\n    this.collectionGoods = this.$store.state.collectionGoods;\n  },\n  methods: {\n    deleteCollGoods(uid, gid) {\n      this.$axios.delete('/collection/deleteByUidGid/' + uid + '/' + gid).then(resp => {\n        if (resp.data.code == 200) {\n          this.$message.success(resp.data.data);\n          // 删除之后再次查询一边\n          this.$axios.get('/collection/findAllByUid/' + this.$store.state.userLogin.uid).then(resp => {\n            console.log(\"collectionGoods:\", resp.data.data);\n            this.$store.commit('collectionGoods', resp.data.data);\n          });\n        } else {\n          this.$message.error(resp.data.data);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AAqCA;EACAA;EACAC;IACA;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA,oEACAC;QACA;UACA;UACA;UACA,+EACAA;YACAC;YACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","collectionGoods","created","methods","deleteCollGoods","then","console"],"sourceRoot":"src/views","sources":["CollectionGoods.vue"],"sourcesContent":["<template>\r\n\r\n    <div class=\"box\">\r\n        <el-container class=\"el-container\">\r\n            <el-header>\r\n\r\n            </el-header>\r\n            <el-main class=\"el-main\">\r\n                <div>\r\n                    <h3>收藏宝贝</h3>\r\n                </div>\r\n                <div>\r\n                    <h2 v-if=\"collectionGoods\">没有收藏的商品</h2>\r\n                    <el-card class=\"box-card\"\r\n                             v-for=\"(c,index) in collectionGoods\"\r\n                             :body-style=\"{ padding: '20px' }\">\r\n                        <div class=\"goods-img\">\r\n                            <img :src=\"c.img\" alt=\"\">\r\n                        </div>\r\n                        <div class=\"goods-title\">\r\n                            {{ c.name }}\r\n                        </div>\r\n                        <div class=\"price\">\r\n                            <span>￥</span><strong>{{ c.dis_price }}</strong>\r\n                            <del>￥{{c.or_price}}</del>\r\n                        </div>\r\n                        <div class=\"delete\" @click=\"deleteCollGoods(c.uid,c.gid)\">\r\n                            <i class=\"el-icon-delete\"></i>\r\n                        </div>\r\n                    </el-card>\r\n                </div>\r\n            </el-main>\r\n        </el-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"CollectionGoods\",\r\n        data() {\r\n            return {\r\n                collectionGoods: [],\r\n            }\r\n        },\r\n        created() {\r\n            this.collectionGoods = this.$store.state.collectionGoods\r\n        },\r\n        methods: {\r\n            deleteCollGoods(uid, gid) {\r\n                this.$axios.delete('/collection/deleteByUidGid/' + uid + '/' + gid)\r\n                .then( resp => {\r\n                    if(resp.data.code == 200){\r\n                        this.$message.success(resp.data.data)\r\n                        // 删除之后再次查询一边\r\n                        this.$axios.get('/collection/findAllByUid/' + this.$store.state.userLogin.uid)\r\n                            .then( resp => {\r\n                                console.log(\"collectionGoods:\",resp.data.data)\r\n                                this.$store.commit('collectionGoods',resp.data.data)\r\n                            })\r\n                    } else {\r\n                        this.$message.error(resp.data.data)\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .box {\r\n        width: 100%;\r\n        height: 100%;\r\n        /*background-color: #E8E2E0;*/\r\n    }\r\n\r\n    .el-container {\r\n        margin: 0 auto;\r\n        width: 800px;\r\n    }\r\n\r\n    .box-card {\r\n        width: 190px;\r\n        /*height: 200px;*/\r\n        float: left;\r\n        margin-right: 30px;\r\n        /*border: 1px solid orangered;*/\r\n        position: relative;\r\n        /*display: flex;*/\r\n        justify-content: center;\r\n        margin-top: 10px;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .box-card:hover {\r\n        box-shadow: 0 0 25px gray;\r\n        border: 1px solid orangered;\r\n    }\r\n\r\n    .goods-img > img {\r\n        width: 150px;\r\n        height: 150px;\r\n        /*border: 1px solid red;*/\r\n    }\r\n\r\n    .goods-title {\r\n        margin: 10px 0;\r\n        cursor: pointer;\r\n        font-size: 18px;\r\n        font-weight: bold;\r\n    }\r\n\r\n    .price > strong {\r\n        color: orangered;\r\n    }\r\n\r\n    .price > del {\r\n        margin-left: 10px;\r\n        color: gray !important;\r\n    }\r\n\r\n    .delete {\r\n        position: absolute;\r\n        right: 20px;\r\n        bottom: 20px;\r\n    }\r\n\r\n    .delete:hover {\r\n        cursor: pointer;\r\n        color: orangered;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}