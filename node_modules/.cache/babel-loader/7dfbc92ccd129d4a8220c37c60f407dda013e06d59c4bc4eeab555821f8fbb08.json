{"ast":null,"code":"import Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport VueAxios from \"vue-axios\";\nimport axios from \"axios\";\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\n\n// 全局路由守卫\nrouter.beforeEach((to, from, next) => {\n  // 如果请求不是login，则发一个试探验证请求，判断是否登录过，登录过则返回code为200\n  if (to.fullPath != '/login') {\n    axios.get('/auth/authentication').then(resp => {\n      if (resp.data.code == 200) {\n        next();\n      } else {\n        next({\n          path: '/login'\n        });\n      }\n    }).catch(error => {\n      next({\n        path: '/login'\n      });\n    });\n  } else {\n    next();\n  }\n});\n\n// 每个请求都设置携带token凭证\naxios.interceptors.request.use(config => {\n  if (store.state.token) {\n    config.headers.token = store.state.token;\n  }\n  return config;\n});\nVue.use(ElementUI);\naxios.defaults.baseURL = 'http://localhost:9999';\nVue.use(VueAxios, axios); // 装载axios\nVue.prototype.$axios = axios;\nVue.config.productionTip = false;\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app');","map":{"version":3,"names":["Vue","App","router","store","VueAxios","axios","ElementUI","beforeEach","to","from","next","fullPath","get","then","resp","data","code","path","catch","error","interceptors","request","use","config","state","token","headers","defaults","baseURL","prototype","$axios","productionTip","render","h","$mount"],"sources":["D:/software/code/HTML_CSS_JS/vue-cli/xiao_xiong_shopping_ui/src/main.js"],"sourcesContent":["import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport store from './store'\r\nimport VueAxios from \"vue-axios\";\r\nimport axios from \"axios\";\r\nimport ElementUI from'element-ui'\r\nimport 'element-ui/lib/theme-chalk/index.css';\r\n\r\n\r\n// 全局路由守卫\r\nrouter.beforeEach((to, from, next) => {\r\n\r\n  // 如果请求不是login，则发一个试探验证请求，判断是否登录过，登录过则返回code为200\r\n  if(to.fullPath != '/login'){\r\n    axios.get('/auth/authentication').then(resp => {\r\n      if(resp.data.code == 200){\r\n        next()\r\n      } else {\r\n        next({\r\n          path: '/login'\r\n        })\r\n      }\r\n    }).catch(error => {\r\n      next({\r\n        path : '/login'\r\n      })\r\n    })\r\n  } else {\r\n    next()\r\n  }\r\n})\r\n\r\n// 每个请求都设置携带token凭证\r\naxios.interceptors.request.use(config => {\r\n  if (store.state.token) {\r\n    config.headers.token = store.state.token\r\n  }\r\n  return config\r\n})\r\n\r\nVue.use(ElementUI)\r\naxios.defaults.baseURL='http://localhost:9999'\r\nVue.use(VueAxios, axios)   // 装载axios\r\nVue.prototype.$axios = axios\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  router,\r\n  store,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,QAAQ,MAAM,WAAW;AAChC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAK,YAAY;AACjC,OAAO,sCAAsC;;AAG7C;AACAJ,MAAM,CAACK,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EAEpC;EACA,IAAGF,EAAE,CAACG,QAAQ,IAAI,QAAQ,EAAC;IACzBN,KAAK,CAACO,GAAG,CAAC,sBAAsB,CAAC,CAACC,IAAI,CAACC,IAAI,IAAI;MAC7C,IAAGA,IAAI,CAACC,IAAI,CAACC,IAAI,IAAI,GAAG,EAAC;QACvBN,IAAI,EAAE;MACR,CAAC,MAAM;QACLA,IAAI,CAAC;UACHO,IAAI,EAAE;QACR,CAAC,CAAC;MACJ;IACF,CAAC,CAAC,CAACC,KAAK,CAACC,KAAK,IAAI;MAChBT,IAAI,CAAC;QACHO,IAAI,EAAG;MACT,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,MAAM;IACLP,IAAI,EAAE;EACR;AACF,CAAC,CAAC;;AAEF;AACAL,KAAK,CAACe,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAI;EACvC,IAAIpB,KAAK,CAACqB,KAAK,CAACC,KAAK,EAAE;IACrBF,MAAM,CAACG,OAAO,CAACD,KAAK,GAAGtB,KAAK,CAACqB,KAAK,CAACC,KAAK;EAC1C;EACA,OAAOF,MAAM;AACf,CAAC,CAAC;AAEFvB,GAAG,CAACsB,GAAG,CAAChB,SAAS,CAAC;AAClBD,KAAK,CAACsB,QAAQ,CAACC,OAAO,GAAC,uBAAuB;AAC9C5B,GAAG,CAACsB,GAAG,CAAClB,QAAQ,EAAEC,KAAK,CAAC,EAAG;AAC3BL,GAAG,CAAC6B,SAAS,CAACC,MAAM,GAAGzB,KAAK;AAC5BL,GAAG,CAACuB,MAAM,CAACQ,aAAa,GAAG,KAAK;AAEhC,IAAI/B,GAAG,CAAC;EACNE,MAAM;EACNC,KAAK;EACL6B,MAAM,EAAEC,CAAC,IAAIA,CAAC,CAAChC,GAAG;AACpB,CAAC,CAAC,CAACiC,MAAM,CAAC,MAAM,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}